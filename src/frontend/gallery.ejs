<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Gallery</title>
    <!-- <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
    /> -->
    <link rel="stylesheet" href="/common.css" />
  </head>

  <body>
    <header>
      <h1>Gallery (<%=files.length%>)</h1>

      <section>
        <article>
          <nav>
            <a href="logout" role="button">Logout</a>
            <a href="upload" role="button">Upload</a>
          </nav>
        </article>
      </section>
    </header>

    <main>
      <section>
        <%files.forEach((v)=> {%>
        <article>
          <header>
            <p><%=v.name%></p>
            <div class="buttons">
              <button id="copy">
                <svg
                  class="buttonicon"
                  xmlns="http://www.w3.org/2000/svg"
                  height="1em"
                  viewBox="0 0 512 512"
                >
                  <!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                  <path
                    d="M208 0H332.1c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9V336c0 26.5-21.5 48-48 48H208c-26.5 0-48-21.5-48-48V48c0-26.5 21.5-48 48-48zM48 128h80v64H64V448H256V416h64v48c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V176c0-26.5 21.5-48 48-48z"
                  />
                </svg>
              </button>
              <button id="delete">
                <svg
                  class="buttonicon"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 16 16"
                  width="16"
                  height="16"
                >
                  <path
                    d="M11 1.75V3h2.25a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1 0-1.5H5V1.75C5 .784 5.784 0 6.75 0h2.5C10.216 0 11 .784 11 1.75ZM4.496 6.675l.66 6.6a.25.25 0 0 0 .249.225h5.19a.25.25 0 0 0 .249-.225l.66-6.6a.75.75 0 0 1 1.492.149l-.66 6.6A1.748 1.748 0 0 1 10.595 15h-5.19a1.75 1.75 0 0 1-1.741-1.575l-.66-6.6a.75.75 0 1 1 1.492-.15ZM6.5 1.75V3h3V1.75a.25.25 0 0 0-.25-.25h-2.5a.25.25 0 0 0-.25.25Z"
                  ></path>
                </svg>
              </button>
            </div>
          </header>

          <main>
            <img src="<%=v.src%>" alt="file named <%=v.name%>" />
          </main>
        </article>
        <%})%>
      </section>
    </main>
  </body>

  <script>
    document.querySelectorAll("#copy").forEach((v) => {
      v.addEventListener("click", (e) => {
        const url = e.originalTarget.parentElement.children[1].href;
        navigator.clipboard.writeText(url);
        alert("Copied.");
      });
    });

    document.querySelectorAll("#delete").forEach((v) => {
      v.addEventListener("click", (e) => {
        const url = e.originalTarget.parentElement.children[1].href;

        alert("Your mom.");
      });
    });
  </script>

  <style>
    .buttonicon {
      margin: 0 auto;
      display: block;
      max-height: 100%;
      width: auto;
    }

    #delete {
      background-color: #ff8080;
      border: 0;
    }

    #delete:hover {
      background-color: #e24f4f;
    }
  </style>
</html>
